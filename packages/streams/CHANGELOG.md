# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [0.1.0]

### Uncategorized

- refactor: Prepare for publishing packages to npm ([#507](https://github.com/MetaMask/ocap-kernel/pull/507))
- feat(streams): Add stream splitting ([#503](https://github.com/MetaMask/ocap-kernel/pull/503))
- chore: Bump @metamask/superstruct to 3.2.1 ([#483](https://github.com/MetaMask/ocap-kernel/pull/483))
- feat: Add `rpc-methods` package ([#474](https://github.com/MetaMask/ocap-kernel/pull/474))
- chore: upgrade agoric and endo plugins ([#470](https://github.com/MetaMask/ocap-kernel/pull/470))
- chore: upgrade ESLint, CLI tools and related plugins ([#468](https://github.com/MetaMask/ocap-kernel/pull/468))
- chore: upgrade metamask plugins ([#472](https://github.com/MetaMask/ocap-kernel/pull/472))
- chore: upgrade vite, vitest and related plugins ([#469](https://github.com/MetaMask/ocap-kernel/pull/469))
- refactor: Replace `nullable` structs with `exactOptional` ([#465](https://github.com/MetaMask/ocap-kernel/pull/465))
- refactor: Begin using JSON-RPC for internal messages ([#451](https://github.com/MetaMask/ocap-kernel/pull/451))
- feat(ui): Prevent concurrent requests and improve e2e tests ([#449](https://github.com/MetaMask/ocap-kernel/pull/449))
- chore: Bump @metamask/utils ([#442](https://github.com/MetaMask/ocap-kernel/pull/442))
- chore: Bump TypeScript and related tooling to 5.8 ([#439](https://github.com/MetaMask/ocap-kernel/pull/439))
- refactor: Remove extraneous uses of TypeScript's DOM lib ([#435](https://github.com/MetaMask/ocap-kernel/pull/435))
- chore: Use actual source file extensions for relative imports ([#430](https://github.com/MetaMask/ocap-kernel/pull/430))
- refactor: Replace enums with const objects and string literal types ([#426](https://github.com/MetaMask/ocap-kernel/pull/426))
- chore: Bump TypeScript to 5.8 ([#425](https://github.com/MetaMask/ocap-kernel/pull/425))
- chore: Abstract KVStore to a new store package ([#410](https://github.com/MetaMask/ocap-kernel/pull/410))
- build(deps-dev): bump the npm_and_yarn group across 11 directories with 2 updates ([#412](https://github.com/MetaMask/ocap-kernel/pull/412))
- test: Add `development` mode ([#411](https://github.com/MetaMask/ocap-kernel/pull/411))
- feat(extension): Support multiple simultaneous UI instances ([#374](https://github.com/MetaMask/ocap-kernel/pull/374))
- chore: Update vitest to v3.0.4 ([#386](https://github.com/MetaMask/ocap-kernel/pull/386))
- build(deps-dev): bump typedoc from 0.26.11 to 0.27.6 ([#376](https://github.com/MetaMask/ocap-kernel/pull/376))
- refactor: Replace kernel-UI communication with `BroadcastChannel` ([#349](https://github.com/MetaMask/ocap-kernel/pull/349))
- chore: Bump Vite to v6 and Vitest to v3 ([#364](https://github.com/MetaMask/ocap-kernel/pull/364))
- chore: Add coverage dirs to clean scripts ([#352](https://github.com/MetaMask/ocap-kernel/pull/352))
- build(deps-dev): bump @arethetypeswrong/cli from 0.16.4 to 0.17.3 ([#359](https://github.com/MetaMask/ocap-kernel/pull/359))
- build(deps-dev): bump cookie from 0.7.2 to 1.0.2 ([#361](https://github.com/MetaMask/ocap-kernel/pull/361))
- chore: Remove "includes" property from tsconfig.lint.json files ([#330](https://github.com/MetaMask/ocap-kernel/pull/330))
- build(deps-dev): bump @types/chrome from 0.0.268 to 0.0.293 ([#320](https://github.com/MetaMask/ocap-kernel/pull/320))
- build(deps-dev): bump @metamask/auto-changelog from 3.4.4 to 4.0.0 ([#322](https://github.com/MetaMask/ocap-kernel/pull/322))
- fix: use PACKAGE_NAME variable for validate-changelog command ([#315](https://github.com/MetaMask/ocap-kernel/pull/315))
- build(deps-dev): bump @ts-bridge/cli from 0.5.1 to 0.6.2 ([#308](https://github.com/MetaMask/ocap-kernel/pull/308))
- chore: Fix failing ci ([#313](https://github.com/MetaMask/ocap-kernel/pull/313))
- chore: Add .eslintcache files to "clean" scripts ([#312](https://github.com/MetaMask/ocap-kernel/pull/312))
- chore: bump vitest 2.1.4 ([#297](https://github.com/MetaMask/ocap-kernel/pull/297))
- chore: Add `create-package` utility ([#295](https://github.com/MetaMask/ocap-kernel/pull/295))
- feat(streams): Add Node.js `worker_thread` stream ([#287](https://github.com/MetaMask/ocap-kernel/pull/287))
- refactor: Move `delay()` to production utils ([#282](https://github.com/MetaMask/ocap-kernel/pull/282))
- chore: Bump minimum Node version to 20, support 22 ([#272](https://github.com/MetaMask/ocap-kernel/pull/272))
- Make 'yarn ocap' available everywhere ([#265](https://github.com/MetaMask/ocap-kernel/pull/265))
- chore: Add E2E tests for the Kernel Panel ([#249](https://github.com/MetaMask/ocap-kernel/pull/249))
- refactor: Use streams for vat worker service communication ([#246](https://github.com/MetaMask/ocap-kernel/pull/246))
- feat: Make stream multiplexing more composable ([#240](https://github.com/MetaMask/ocap-kernel/pull/240))
- refactor(streams): Remove Json constraint for stream types ([#239](https://github.com/MetaMask/ocap-kernel/pull/239))
- feat: Add Kernel management panel on extension popup ([#207](https://github.com/MetaMask/ocap-kernel/pull/207))
- chore: Migrate testing to Vitest workspace configuration ([#228](https://github.com/MetaMask/ocap-kernel/pull/228))
- refactor: Replace message kits with superstruct types ([#224](https://github.com/MetaMask/ocap-kernel/pull/224))
- refactor: Replace stream envelopes with multiplex streams ([#223](https://github.com/MetaMask/ocap-kernel/pull/223))
- feat(streams): Add stream multiplexer ([#221](https://github.com/MetaMask/ocap-kernel/pull/221))
- feat(streams): Add name param to all stream base classes ([#220](https://github.com/MetaMask/ocap-kernel/pull/220))
- feat(streams): Add consumer-provided input validation to streams ([#219](https://github.com/MetaMask/ocap-kernel/pull/219))
- fix: Add Source Filtering to ChromeRuntimeReader for Multi-Endpoint Support ([#215](https://github.com/MetaMask/ocap-kernel/pull/215))
- test(streams): convert jsdom to playwright tests ([#210](https://github.com/MetaMask/ocap-kernel/pull/210))
- chore: Fix various tsconfig issues ([#199](https://github.com/MetaMask/ocap-kernel/pull/199))
- chore: Enable repo-wide type checks from source files ([#197](https://github.com/MetaMask/ocap-kernel/pull/197))
- feat(streams): Synchronize duplex streams ([#189](https://github.com/MetaMask/ocap-kernel/pull/189))
- chore: Configure TypeScript to use source files during development ([#194](https://github.com/MetaMask/ocap-kernel/pull/194))
- chore: Improve type linting flow ([#193](https://github.com/MetaMask/ocap-kernel/pull/193))
- chore: Fix typechecks ([#192](https://github.com/MetaMask/ocap-kernel/pull/192))
- feat(streams)!: Re-throw dispatch errors from write streams ([#188](https://github.com/MetaMask/ocap-kernel/pull/188))
- refactor(streams)!: Stop sending iterator results over the wire ([#187](https://github.com/MetaMask/ocap-kernel/pull/187))
- chore: Refactor ESLint scripts and configs ([#176](https://github.com/MetaMask/ocap-kernel/pull/176))
- chore: Fix type import specifier linting ([#175](https://github.com/MetaMask/ocap-kernel/pull/175))
- feat: Marshal and unmarshal `@ocap/errors` ([#154](https://github.com/MetaMask/ocap-kernel/pull/154))
- feat(streams): Make `MessagePort` streams tolerant of port multi-tenancy ([#158](https://github.com/MetaMask/ocap-kernel/pull/158))
- feat(streams): Add optional `portHandler` param to message channel protocol ([#157](https://github.com/MetaMask/ocap-kernel/pull/157))
- feat: Custom Error Classes with Error Codes ([#149](https://github.com/MetaMask/ocap-kernel/pull/149))
- chore: Bump `@endo/*` and `ses` ([#148](https://github.com/MetaMask/ocap-kernel/pull/148))
- chore: Lint more files ([#147](https://github.com/MetaMask/ocap-kernel/pull/147))
- chore: Upgrade Eslint from v8 to v9 (flat config) ([#139](https://github.com/MetaMask/ocap-kernel/pull/139))
- feat(streams): Generalize message channel to abstract execution contexts ([#140](https://github.com/MetaMask/ocap-kernel/pull/140))
- feat(streams): Replace `StreamPair` with `DuplexStream` ([#134](https://github.com/MetaMask/ocap-kernel/pull/134))
- fix(streams): Preserve errors occurring before reads ([#133](https://github.com/MetaMask/ocap-kernel/pull/133))
- feat(streams,extension): Add PostMessageStream module ([#132](https://github.com/MetaMask/ocap-kernel/pull/132))
- feat(streams,extension): Add `chrome.runtime` streams ([#128](https://github.com/MetaMask/ocap-kernel/pull/128))
- refactor(streams): Establish abstract base stream class ([#127](https://github.com/MetaMask/ocap-kernel/pull/127))
- refactor: Standardize stringify to the `@ocap/utils` implementation ([#110](https://github.com/MetaMask/ocap-kernel/pull/110))
- refactor: Differentiate commands and command replies ([#94](https://github.com/MetaMask/ocap-kernel/pull/94))
- feat(kernel): Implement Supervisor class ([#89](https://github.com/MetaMask/ocap-kernel/pull/89))
- refactor: Extract message / command types into utils package ([#85](https://github.com/MetaMask/ocap-kernel/pull/85))
- refactor(extension): Extract kernel and vat logic into new package ([#79](https://github.com/MetaMask/ocap-kernel/pull/79))
- build(extension): Add build-time type checks ([#77](https://github.com/MetaMask/ocap-kernel/pull/77))
- refactor(extension,streams): Abstract envelope handling ([#71](https://github.com/MetaMask/ocap-kernel/pull/71))
- chore: Update lint configuration ([#65](https://github.com/MetaMask/ocap-kernel/pull/65))
- chore: @ts-bridge/cli@0.5.1 ([#66](https://github.com/MetaMask/ocap-kernel/pull/66))
- feat(extension): Add distributed object capability programming ([#43](https://github.com/MetaMask/ocap-kernel/pull/43))
- chore: Add package level lint scripts ([#51](https://github.com/MetaMask/ocap-kernel/pull/51))
- chore: Migrate constraints from Prolog to JavaScript ([#47](https://github.com/MetaMask/ocap-kernel/pull/47))
- chore: Re-bump TypeScript versions per #27 undoing #16 ([#35](https://github.com/MetaMask/ocap-kernel/pull/35))
- feat: Add `streams` package ([#16](https://github.com/MetaMask/ocap-kernel/pull/16))

[Unreleased]: https://github.com/MetaMask/ocap-kernel/compare/@metamask/streams@0.1.0...HEAD
[0.1.0]: https://github.com/MetaMask/ocap-kernel/releases/tag/@metamask/streams@0.1.0
